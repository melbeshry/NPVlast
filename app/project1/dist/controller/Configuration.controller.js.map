{"version":3,"file":"Configuration.controller.js","names":["sap","ui","define","Controller","JSONModel","Column","Text","Input","MessageToast","StringType","MessageBox","extend","MAX_PERIODS","FIXED_ROWS","onInit","this","_isSaving","_hasUnsavedChanges","_initialDataSnapshot","_lastSaveTime","oConfigModel","frequency","project","projectId","getView","setModel","_initializeDataModel","_createPeriodTable","_loadDataFromBackend","setTimeout","_createInitialSnapshot","_setupChangeTracking","bind","aColumns","aAllRows","map","s","rel_period","i","sPeriod","push","header","key","forEach","oRow","cells","oCol","oModel","columns","rows","oPeriodsModel","getModel","config","JSON","parse","stringify","getData","periods","console","log","attachPropertyChange","_updateSaveButtonState","oSaveButton","byId","setEnabled","setText","_hasDataChanged","currentData","currentRows","initialRows","length","currentCells","initialCells","_hasValidData","aRows","getProperty","j","sValue","trim","_preventRapidClicks","currentTime","Date","now","show","oODataModel","getOwnerComponent","sProjectId","warn","oBinding","bindList","model","Filter","FilterOperator","EQ","$expand","requestContexts","then","aContexts","oConfig","getObject","setProperty","_updateModelWithLoadedData","catch","oError","error","aPeriodsData","oPeriod","find","r","orig_period","value","toString","oTable","destroyColumns","unbindItems","addColumn","text","width","bindItems","path","factory","sId","oContext","sRelPeriod","iRowIndex","indexOf","aCells","nColPeriod","parseInt","replace","nRowPeriod","type","liveChange","_onCellChange","placeholder","m","ColumnListItem","sColumnKey","oEvent","oInput","getSource","getValue","getBindingContext","getPath","fValue","parseFloat","isNaN","setValueState","setValueStateText","onSave","information","title","warning","_resetSaveState","oPeriodsData","hasValidationError","aOrigPeriods","col","origPeriod","aRelatedValues","selfIntersection","selfValue","Math","abs","oConfigData","aPeriodsPayload","oPayload","create","created","message","submitBatch","onProjectChange","getParameter","getKey","onExit"],"sources":["Configuration-dbg.controller.js"],"mappings":"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","ignoreList":[]}